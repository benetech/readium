Readium.Models.ReadiumOptions=Backbone.Model.extend({initialize:function(){this.set("id","singleton")},defaults:{hijack_epub_urls:!1,verbose_unpacking:!0,display_page_numbers:!0,font_size:10,font_face:"default",speech_rate:1,current_margin:3,current_theme:"default-theme",pagination_mode:"scrolling",show_beeline_alert:"true"},sync:Readium.Utils.LocalStorageAdaptor("READIUM_OPTIONS"),applyOptions:function(){var a=this.get("controller");a.set({font_size:this.get("font_size"),font_face:this.get("font_face"),
display_page_numbers:this.get("display_page_numbers"),current_theme:this.get("current_theme"),beeline_theme:this.get("beeline_theme"),current_margin:this.get("current_margin"),speech_rate:this.get("speech_rate"),voice_uri:this.get("voice_uri")});this.get("pagination_mode")=="scrolling"?a.set("should_scroll",!0):(a.set("should_scroll",!1),this.get("pagination_mode")=="facing"!==a.get("two_up")&&a.set("two_up",!a.get("two_up")));this.save()},resetOptions:function(){var a=this.get("controller");this.fetch();
this.set("controller",a)}},{getInstance:function(){var a=new Readium.Models.ReadiumOptions;a.fetch({error:function(){localStorage.setItem("READIUM_OPTIONS","");a.save()}});return a}});
